export const translations = {
  fr: {
    app: {
      title: "Warehouse Reception",
      subtitle: "Suivi des réceptions et dates d'expiration",
      footer: "Système de Suivi des Réceptions"
    },
    form: {
      title: "Formulaire de Réception",
      productName: "Nom du Produit",
      productNamePlaceholder: "Entrez le nom du produit",
      cartons: "Nombre de Cartons",
      cartonsPlaceholder: "Nombre de cartons",
      unitsPerCarton: "Unités par Carton",
      unitsPerCartonPlaceholder: "Unités par carton",
      barcode: "Code-barres (6 derniers chiffres)",
      barcodePlaceholder: "123456",
      totalUnits: "Unités Totales",
      productionDate: "Date de Production",
      expirationDate: "Date d'Expiration",
      shelfLife: "Durée de Vie (Mois)",
      status: "Statut",
      addButton: "Ajouter à la Liste",
      adding: "Ajout en cours...",
      generatePDF: "Générer PDF",
      requiredDates: "Veuillez sélectionner les dates de production et d'expiration"
    },
    table: {
      title: "Enregistrements de Réception",
      searchPlaceholder: "Rechercher...",
      downloadPDF: "Télécharger PDF",
      totalReceptions: "Total des réceptions",
      totalUnits: "Unités totales",
      loading: "Chargement des réceptions...",
      noResults: "Aucune réception trouvée pour votre recherche",
      noData: "Aucune réception enregistrée",
      generalTotal: "TOTAL GÉNÉRAL",
      deleteConfirm: "Êtes-vous sûr de vouloir supprimer cette réception ?",
      deleteError: "Erreur lors de la suppression",
      columns: {
        product: "Produit",
        product_name: "Produit",
        // palette: "Palette", 
        // pallet_number: "Palette",
        cartons: "Cartons",
        unitsPerCarton: "Unités/Carton",
        units_per_carton: "Unités/Carton",
        totalUnits: "Unités Totales",
        total_units: "Unités Totales",
        barcode: "Code-barres",
        production: "Production",
        production_date: "Production",
        expiration: "Expiration",
        expiration_date: "Expiration",
        shelfLife: "Durée de Vie",
        shelf_life_months: "Durée de Vie",
        status: "Statut",
        actions: "Actions"
      }
    },
    status: {
      ok: "OK",
      passedThird: "Passed ⅓",
      expired: "Expired"
    },
    pdf: {
      title: "RAPPORT DES RÉCEPTIONS",
      generatedOn: "Généré le",
      receptionsCount: "Nombre de réceptions",
      totalUnits: "Unités totales",
      generalTotal: "TOTAL GÉNÉRAL DES UNITÉS",
      error: "Erreur lors de la génération du PDF"
    },
    common: {
      all: "Tous",
      allStatus: "Tous les statuts",
      resetFilters: "Réinitialiser les filtres",
      filter: "Filtre",
      status: "Statut"
    }
  },
  en: {
    app: {
      title: "Warehouse Reception",
      subtitle: "Track product receptions and expiration dates",
      footer: "Warehouse Reception Tracking System"
    },
    form: {
      title: "Reception Form",
      productName: "Product Name",
      productNamePlaceholder: "Enter product name",
      cartons: "Number of Cartons",
      cartonsPlaceholder: "Number of cartons",
      unitsPerCarton: "Units per Carton",
      unitsPerCartonPlaceholder: "Units per carton",
      barcode: "Barcode (last 6 digits)",
      barcodePlaceholder: "123456",
      totalUnits: "Total Units",
      productionDate: "Production Date",
      expirationDate: "Expiration Date",
      shelfLife: "Shelf Life (Months)",
      status: "Status",
      addButton: "Add to List",
      adding: "Adding...",
      generatePDF: "Generate PDF",
      requiredDates: "Please select production and expiration dates"
    },
    table: {
      title: "Reception Records",
      searchPlaceholder: "Search...",
      downloadPDF: "Download PDF",
      totalReceptions: "Total receptions",
      totalUnits: "Total units",
      loading: "Loading receptions...",
      noResults: "No receptions found for your search",
      noData: "No receptions recorded",
      generalTotal: "GENERAL TOTAL",
      deleteConfirm: "Are you sure you want to delete this reception?",
      deleteError: "Error deleting reception",
      columns: {
        product: "Product",
        product_name: "Product",
        palette: "Palette",
        pallet_number: "Palette",
        cartons: "Cartons",
        unitsPerCarton: "Units/Carton",
        units_per_carton: "Units/Carton",
        totalUnits: "Total Units",
        total_units: "Total Units",
        barcode: "Barcode",
        production: "Production",
        production_date: "Production",
        expiration: "Expiration",
        expiration_date: "Expiration",
        shelfLife: "Shelf Life",
        shelf_life_months: "Shelf Life",
        status: "Status",
        actions: "Actions"
      }
    },
    status: {
      ok: "OK",
      passedThird: "Passed ⅓",
      expired: "Expired"
    },
    pdf: {
      title: "RECEPTIONS REPORT",
      generatedOn: "Generated on",
      receptionsCount: "Number of receptions",
      totalUnits: "Total units",
      generalTotal: "GENERAL TOTAL UNITS",
      error: "Error generating PDF"
    },
    common: {
      all: "All",
      allStatus: "All status",
      resetFilters: "Reset filters",
      filter: "Filter",
      status: "Status"
    }
  },
  ar: {
    app: {
      title: "استقبال المستودع",
      subtitle: "تتبع استلام المنتجات وتواريخ انتهاء الصلاحية",
      footer: "نظام تتبع استقبال المستودع"
    },
    form: {
      title: "نموذج الاستقبال",
      productName: "اسم المنتج",
      productNamePlaceholder: "أدخل اسم المنتج",
      cartons: "عدد الكراتين",
      cartonsPlaceholder: "عدد الكراتين",
      unitsPerCarton: "الوحدات في الكرتون",
      unitsPerCartonPlaceholder: "الوحدات في الكرتون",
      barcode: "الباركود (آخر 6 أرقام)",
      barcodePlaceholder: "123456",
      totalUnits: "إجمالي الوحدات",
      productionDate: "تاريخ الإنتاج",
      expirationDate: "تاريخ انتهاء الصلاحية",
      shelfLife: "مدة الصلاحية (أشهر)",
      status: "الحالة",
      addButton: "إضافة إلى القائمة",
      adding: "جاري الإضافة...",
      generatePDF: "إنشاء PDF",
      requiredDates: "الرجاء اختيار تاريخ الإنتاج وانتهاء الصلاحية"
    },
    table: {
      title: "سجلات الاستقبال",
      searchPlaceholder: "بحث...",
      downloadPDF: "تحميل PDF",
      totalReceptions: "إجمالي الاستقبالات",
      totalUnits: "إجمالي الوحدات",
      loading: "جاري تحميل الاستقبالات...",
      noResults: "لم يتم العثور على استقبالات لبحثك",
      noData: "لا توجد استقبالات مسجلة",
      generalTotal: "المجموع العام",
      deleteConfirm: "هل أنت متأكد من حذف هذا الاستقبال؟",
      deleteError: "خطأ في الحذف",
      columns: {
        product: "المنتج",
        product_name: "المنتج",
        palette: "الباليت",
        pallet_number: "الباليت",
        cartons: "الكراتين",
        unitsPerCarton: "وحدات/كرتون",
        units_per_carton: "وحدات/كرتون",
        totalUnits: "إجمالي الوحدات",
        total_units: "إجمالي الوحدات",
        barcode: "الباركود",
        production: "الإنتاج",
        production_date: "الإنتاج",
        expiration: "الانتهاء",
        expiration_date: "الانتهاء",
        shelfLife: "مدة الصلاحية",
        shelf_life_months: "مدة الصلاحية",
        status: "الحالة",
        actions: "الإجراءات"
      }
    },
    status: {
      ok: "جيد",
      passedThird: "مر الثلث",
      expired: "منتهي"
    },
    pdf: {
      title: "تقرير الاستقبالات",
      generatedOn: "تم الإنشاء في",
      receptionsCount: "عدد الاستقبالات",
      totalUnits: "إجمالي الوحدات",
      generalTotal: "المجموع العام للوحدات",
      error: "خطأ في إنشاء PDF"
    },
    common: {
      all: "الكل",
      allStatus: "جميع الحالات",
      resetFilters: "إعادة تعيين الفلاتر",
      filter: "فلتر",
      status: "الحالة"
    }
  }
};

// Hook de traduction sécurisé
export const useTranslation = () => {
  const t = (language, key) => {
    // Vérifications de sécurité
    if (!language || !key) {
      console.warn('Language or key is missing', { language, key });
      return key || 'Missing key';
    }

    // Vérifier si la langue existe
    const langTranslations = translations[language];
    if (!langTranslations) {
      console.warn(`Language '${language}' not found in translations`);
      return key;
    }

    // Parcourir les clés
    const keys = key.split('.');
    let value = langTranslations;
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        // Si la clé n'est pas trouvée, retourner la dernière partie de la clé
        console.warn(`Translation key '${key}' not found for language '${language}'`);
        return keys[keys.length - 1];
      }
    }
    
    return value || key;
  };

  return t;
};

// Hook combiné pour une utilisation plus simple
export const useAppTranslation = () => {
  // Note: Vous devrez adapter cette partie selon votre implémentation de useTheme
  // Pour l'instant, on utilise une valeur par défaut
  const getLanguage = () => {
    // Vous pouvez remplacer cette logique par votre propre gestion de thème
    return localStorage.getItem('language') || 'fr';
  };
  
  const t = useTranslation();
  
  return (key) => t(getLanguage(), key);
};